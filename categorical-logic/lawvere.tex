\documentclass{zett}
\input{preambles}
\title{Lawvere theories}
\author{Frank Tsai}
\date{\today}
% \thanks{}
\begin{document}
\maketitle
\tableofcontents

\section{Sources}
\label{sec:sources}

\cite{borger91:generators}, \cite{lawvere63:functsem}, \cite{adamek10:algebraic}.

\section{Preliminaries}
\label{sec:preliminaries}

\begin{defn}
  Let $\iC$ be a small category and let $S : \iC \to \CSet$ be a functor that maps each object $c \in \iC$ to the singleton set and each morphism to the identity function.
  The \emph{connected component} of $\iC$ is $\colim S$.
\end{defn}

\begin{defn}
  A small category $\iC$ is said to be \emph{connected} if $\colim S$ is the singleton set.
\end{defn}

\begin{rmk}
  The empty category $\varnothing$ is not connected since the colimit of the empty diagram is the empty set.
\end{rmk}

\begin{defn}\label{defn:sifted-categories}
  A small category $\iC$ is \emph{sifted} if finite products in $\CSet$ commute with colimits over $\iC$.
  Concretely, a small category $\iC$ is sifted if, given a diagram $D : \iC \times \iJ \to \CSet$ where $\iJ$ is a finite set, the canonical morphism
  \[
    \delta : \colim_{\iC}\prod_{\iJ}D(c,j) \to \prod_{\iJ}\colim_{\iC}D(c,j)
  \]
  is an isomorphism.
  Colimits of diagrams over sifted categories are called \emph{sifted colimits}.
\end{defn}

\begin{defn}
  A small category $\iC$ is \emph{filtered} if every finite diagram $F : \iJ \to \iC$ admits a cocone.
  Colimits of diagrams over filtered categories are called \emph{filtered colimits}.
\end{defn}

\begin{rmk}
  It is well-known that filtered colimits commute with finite limits in $\CSet$.
\end{rmk}

\begin{lem}\label{lem:sifted-empty-binary}%
  A small category $\iC$ is sifted if and only if colimits under $\iC$ commute with the empty product and binary products.
\end{lem}
\begin{proof}
  The only if direction is trivial.
  Let $D : \iC \times \iJ \to \CSet$ be an arbitrary diagram.
  We proceed by induction on the size of $\iJ$.
  When $\iJ$ is the empty set, then $\Pi_{\iJ}\colim_{\iC}D(c,j)$ is the empty set, whereas $\Pi_{\iJ}D(c,j)$ is the initial object in $\CSet^{\iC}$ whose colimit is also the empty set.
  Thus, the canonical morphism $\delta$ must be an isomorphism.

  Now, consider the following colimit
  \[
    \colim_{\iD}\left(\prod_{i=1}^{n}D(d, j_{i}) \times D(d, j_{i+1})\right)
  \]
  This colimit commutes with binary products by the hypothesis.
  Thus,
  \[
    \colim_{\iD}\left(\prod_{i=1}^{n}D(d, j_{i}) \times D(d, j_{i+1})\right) \iso \colim_{\iD}\prod_{i=1}^{n}D(d, j_{i}) \times \colim_{\iD}D(d, j_{i+1})
  \]
  By the induction hypothesis, $\colim_{\iD}\prod_{i=1}^{n}D(d, j_{i}) \iso \prod_{i=1}^{n}\colim_{\iD}D(d, j_{i})$, so the statement follows.
\end{proof}

\begin{defn}
  A functor $F : \iC \to \iD$ is \emph{final} if, for any diagram $G : \iD \to \iE$ such that $\colim_{\iC}GF$ exists, then $\colim_{\iD}G$ exists and the canonical morphism $\colim_{\iC}GF \to \colim_{\iD}G$ is an isomorphism.
\end{defn}

\begin{lem}\label{lem:final-slice-connected}
  A functor $F : \iC \to \iD$ is final if and only if the slice category $d \dn F$ is connected for all $d \in \iD$.
\end{lem}
\begin{proof}
  Suppose that $F$ is final.
  Consider the diagram $\iD(d, F\blank) : \iC \to \CSet$.
  By hypothesis, $\colim_{\iC}\iD(d, F\blank) \iso \colim_{\iD}\iD(d, \blank)$.
  The colimit of the represented functor is the singleton set.
  Thus, $\colim_{\iC}\iD(d, F\blank)$ is also the singleton set, so $d \dn F$ is connected.

  Conversely, suppose that $d \dn F$ is connected for all $d \in \iD$.
  Let $G : \iD \to \iE$ be any diagram such that $\colim_{\iC}GF$ exists.
  We show that $\colim_{\iD}G$ is just $\colim_{\iC}GF$.
  Let $\lambda : GF \to e$ be the colimiting cocone.
  We construct a colimiting cocone $\lambda' : G \to e$ as follows.
  Choose an arbitrary object in $d \dn F$, i.e., an object $c \in \iC$ and a morphism $f : d \to Fc$.
  Then the component $\lambda'_{d}$ is the composite
  \[
    % https://q.uiver.app/#q=WzAsMyxbMCwyLCJHZCJdLFsyLDIsIkdGYyJdLFsyLDAsImUiXSxbMCwxLCJHZiIsMl0sWzEsMiwiXFxsYW1iZGFfe2N9IiwyXSxbMCwyLCJcXGxhbWJkYSdfe2R9Il1d
    \begin{tikzcd}
      && e \\
      \\
      Gd && GFc
      \arrow["Gf"', from=3-1, to=3-3]
      \arrow["{\lambda_{c}}"', from=3-3, to=1-3]
      \arrow["{\lambda'_{d}}", from=3-1, to=1-3]
    \end{tikzcd}
  \]
  Naturality of $\lambda'$ follows from the naturality of $\lambda$ and the fact that $d \dn F$ is connected for all $d \in \iD$.
  Connectedness means that there is a sequence of zig-zag morphisms so that every triangle in the square commutes.
  \[
    % https://q.uiver.app/#q=WzAsOCxbMCwwLCJHZCJdLFs0LDAsIkdGYyJdLFs0LDIsIkdGY197Mn0iXSxbNCwzLCJHRmNfezN9Il0sWzQsNCwiR0ZjJyJdLFswLDQsIkdkJyJdLFs0LDEsIkdGY197MX0iXSxbNiwyLCJlIl0sWzMsMl0sWzMsNF0sWzAsNSwiR2ciLDJdLFswLDEsIkdmIl0sWzUsNCwiR2YnIiwyXSxbMSw2XSxbMiw2XSxbMSw3LCJcXGxhbWJkYV97Y30iXSxbNCw3LCJcXGxhbWJkYV97Yyd9IiwyXSxbMCw2LCJHZl97MX0iLDFdLFs2LDcsIlxcbGFtYmRhX3tjX3sxfX0iLDFdLFszLDcsIlxcbGFtYmRhX3tjX3szfX0iLDFdLFswLDMsIkdmX3szfSIsMV0sWzAsNCwiRyhmJ2cpIiwyXV0=
    \begin{tikzcd}
      Gd &&&& GFc \\
      &&&& {GFc_{1}} \\
      &&&& {GFc_{2}} && e \\
      &&&& {GFc_{3}} \\
      {Gd'} &&&& {GFc'}
      \arrow[from=4-5, to=3-5]
      \arrow[from=4-5, to=5-5]
      \arrow["Gg"', from=1-1, to=5-1]
      \arrow["Gf", from=1-1, to=1-5]
      \arrow["{Gf'}"', from=5-1, to=5-5]
      \arrow[from=1-5, to=2-5]
      \arrow[from=3-5, to=2-5]
      \arrow["{\lambda_{c}}", from=1-5, to=3-7]
      \arrow["{\lambda_{c'}}"', from=5-5, to=3-7]
      \arrow["{Gf_{1}}"{description}, from=1-1, to=2-5]
      \arrow["{\lambda_{c_{1}}}"{description}, from=2-5, to=3-7]
      \arrow["{\lambda_{c_{3}}}"{description}, from=4-5, to=3-7]
      \arrow["{Gf_{3}}"{description}, from=1-1, to=4-5]
      \arrow["{G(f'g)}"', from=1-1, to=5-5]
    \end{tikzcd}
  \]
  It is easy to verify that this cocone is colimiting.
\end{proof}

\begin{thm}\label{thm:characterization-of-sifted}
  A small category $\iC$ is sifted if and only if it is connected and the diagonal functor $\Delta$ is final.
\end{thm}
\begin{proof}
  By \cref{lem:sifted-empty-binary}, the sifted condition is equivalent to that colimits under $\iC$ commute with the empty product and binary products.
  Let $D : \iC \to \CSet$ be an arbitrary diagram.
  Suppose that $\iC$ is sifted.
  Then,
  \[
    \colim_{\iC}\prod_{\varnothing}D \iso \prod_{\varnothing}\colim_{\iC}D \iso 1
  \]
  The empty product $\prod_{\varnothing}D$ is the terminal object $S$ in $\CSet^{\iC}$.
  Since $\colim_{\iC}S \iso 1$, $\iC$ is connected.
  Additionally, for any $c, c' \in \iC$
  \begin{align}
    \colim_{\iC}\iC \times \iC((c, c'), \Delta\blank) &= \colim_{\iC}(\iC(c, \blank) \times \iC(c', \blank))\\
                                            &\iso \colim_{\iC}\iC(c, \blank) \times \colim_{\iC}\iC(c', \blank)\\
                                            &\iso 1
  \end{align}
  Thus, the category of cospans $(c, c') \dn \Delta$ is connected.
  By \cref{lem:final-slice-connected}, $\Delta$ is final.
  
  Conversely, assume that $\Delta$ is final and that $\iC$ is connected.
  Then colimits commute with the empty product. 
  \[
    \colim_{\iC}\prod_{\varnothing}F(c,j) \iso \colim_{\iC}S \iso 1 \iso \prod_{\varnothing}\colim_{\iC}F(c,j)
  \]
  It remains to show that colimits commute with binary products.
  Let $G : \iC \times \iC \to \CSet$ be a functor defined by $(c, c') \mapsto F(c,j) \times F(c', j')$.
  Then,
  \begin{align}
    \colim_{\iC}F(c, j) \times F(c, j') &\iso \colim_{\iC}G\Delta\\
                                   &\iso \colim_{\iC \times \iC}G\\
                                   &\iso \colim_{c \in \iC}\colim_{c' \in \iC}F(c,j) \times F(c',j')\\
                                   &\iso \colim_{\iC}F(c, j) \times \colim_{\iC}F(c, j')
  \end{align}
  The last isomorphism follows from the fact that $\blank \times X$ is a left adjoint (colimit preserving) for any set $X$ and that $A \times B \iso B \times A$.
\end{proof}

\begin{cor}\label{cor:finite-coproducts-then-sifted}
  Every small category $\iC$ with finite coproducts is sifted.
\end{cor}
\begin{proof}
  By \cref{thm:characterization-of-sifted}, it suffices to show that $\iC$ is connected and that for all $c, c' \in \iC$, the category of cospans $(c, c') \dn \Delta$ is connected.
  $\iC$ has an initial object, so it is connected.
  $\iC$ has binary coproducts, so for any $c, c' \in \iC$, their coproduct in $\iC$ corresponds to the initial object in $(c, c') \dn \Delta$.
  Thus, the category of cospans is connected.
\end{proof}

\begin{lem}\label{lem:functor-category-sifted-colimits-commute-with-finite-products}
  For any small category $\iC$, sifted colimits in $\CSet^{\iC}$ commute with finite products.
\end{lem}
\begin{proof}
  Let $D : \iS \times \iJ \to \CSet^{\iC}$ be a diagram where $\iS$ is a sifted category and $\iJ$ is a finite set.
  The colimit $\colim_{\iS}\prod_{\iJ}D(s,j)$ is computed componentwise: $\colim_{\iS}\prod_{\iJ}D(s,j)(c)$ is the colimit $\colim_{\iS}\prod_{\iJ}\ev_{c}D(s,j)$.
  By definition, sifted colimits commute with finite products in $\CSet$, i.e.,
  \[
    \colim_{\iS}\prod_{\iJ}\ev_{c}D(s,j) \iso \prod_{\iJ}\colim_{\iS}\ev_{c}D(s,j)
  \]
  for all $c \in \iC$.
  These isomorphisms assemble into a natural isomorphism:
  \[
    \colim_{S}\prod_{J}D(s,j) \iso \prod_{J}\colim_{S}D(s,j)
  \]
\end{proof}

\begin{defn}
  Let $\iJ$ be the following category
  \[
    % https://q.uiver.app/#q=WzAsMixbMCwwLCJcXGJ1bGxldCJdLFsyLDAsIlxcYnVsbGV0Il0sWzAsMSwiZiIsMCx7Im9mZnNldCI6LTJ9XSxbMCwxLCJnIiwyLHsib2Zmc2V0IjoyfV0sWzEsMCwicyIsMV1d
    \begin{tikzcd}
      \bullet && \bullet
      \arrow[shift left=2, from=1-1, to=1-3]
      \arrow[shift right=2, from=1-1, to=1-3]
      \arrow[from=1-3, to=1-1]
    \end{tikzcd}
  \]
  Colimits of diagrams of shape $\iJ$ are called \emph{reflexive coequalizers}.
  These are equalizers of parallel pairs that admit a common section.
\end{defn}

\begin{rmk}
  Reflexive coequalizers are sifted colimits.
\end{rmk}

\section{Lawvere Theory}
\label{sec:lawvere-theory}

\begin{defn}
  A \emph{Lawvere theory} is a small category $\cT$ with finite products.
\end{defn}

\begin{defn}
  The category of \emph{algebras} $\Alg(\cT)$ of a given Lawvere theory $\cT$ is the full subcategory $\CSet^{\cT}$ spanned by finite-product preserving functors.
  A \emph{homomorphism} between two algebras is a natural transformation.
\end{defn}

\begin{defn}
  A category is said to be \emph{algebraic} if it is equivalent to $\Alg(\cT)$ for some Lawvere theory $\cT$.
\end{defn}

\begin{thm}
  Every algebraic category is complete.
\end{thm}
\begin{proof}
  It suffices to show that $\Alg(\cT)$ is complete for all Lawvere theory $\cT$.
  Let $D : \iJ \to \Alg(\cT)$ be any small diagram.
  Consider the diagram
  \[
    \iota D : \iJ \to \CSet^{\cT}
  \]
  where $\iota$ is the inclusion functor.
  Since $\iota$ is fully faithful, it reflects limits.
  The limit $\lim \iota D$ exists because $\CSet^{\cT}$ is complete.
  Now, it suffices to show that $\Alg(\cT)$ has enough limits so that $\iota$ creates limits.
  To this end, we show that $\lim \iota D$ is limit preserving (therefore, finite-product preserving).
  For an arbitrary diagram $G : \iC \to \cT$, we have
  \[
    \lim_{\iJ} \iota D(\lim_{\iC}G) \iso \lim_{\iJ}\lim_{\iC}\iota D \circ G \iso \lim_{\iC}\lim_{\iJ}\iota D \circ G
  \]
\end{proof}

\begin{lem}\label{lem:inclusion-creates-sifted-colimits}%
  Let $\cT$ be a Lawvere theory.
  The inclusion functor $\iota : \Alg(\cT) \to \CSet^{\cT}$ creates colimits of sifted diagrams.
\end{lem}
\begin{proof}
  Let $\iS$ be a sifted category and $D : \iS \to \Alg(\cT)$ be a diagram.
  Since $\CSet^{\cT}$ is cocomplete (therefore, it has all sifted colimits) and $\iota$ reflects all colimits, it suffices to show that $\colim_{\iS}\iota \circ D$ is a finite-product preserving functor, but this is immediate from \cref{lem:functor-category-sifted-colimits-commute-with-finite-products}.
\end{proof}

\begin{thm}\label{thm:algebraic-categories-has-sifted-colimits}
  Every algebraic category is closed under sifted colimits.
\end{thm}
\begin{proof}
  It suffices to show that $\Alg(\cT)$ is closed under sifted colimits for all Lawvere theory $\cT$.
  By \cref{lem:inclusion-creates-sifted-colimits}, $\iota$ creates sifted colimits.
  Since $\CSet^{\cT}$ is cocomplete, it follows that $\Alg(\cT)$ has sifted colimits.
\end{proof}

\begin{cor}
  Sifted colimits commute with finite products in algebraic categories.
\end{cor}
\begin{proof}
  It suffices to prove this statement for $\Alg(\cT)$, where $\cT$ is an arbitrary Lawvere theory.
  The inclusion functor $\iota$ reflects isomorphism because it is fully faithful.
  Thus, the isomorphism in \cref{lem:functor-category-sifted-colimits-commute-with-finite-products} is reflected to an isomorphism in $\Alg(\cT)$.
\end{proof}

\section{Algebraic categories as free cocompletions}
\label{sec:algebraic-categories-as-free-cocompletions}

For a small category $\iC$, every set valued functor $F : \iC \to \CSet$ is naturally isomorphic to $\colim \yon\Pi_{F}$, where $\Pi_{F} : (\yon \dn F)\op \to \iC\op$ is the projection functor out of the opposite of the category of elements of $F$.

Given a Lawvere theory $\cT$ and an object $t \in \cT$, the represented functor $\cT(t, \blank) : \cT \to \CSet$ is limit preserving, so $\cT(t, \blank)$ is an algebra.
We call these algebras \emph{represented algebras}.
Indeed, every algebra can be expressed as a colimit of represented algebras.

\begin{lem}\label{lem:algebras-are-sifted-colimits}
  Given a Lawvere theory $\cT$, for any functor $F : \cT \to \CSet$ the following conditions are equivalent:
  \begin{enumerate}
  \item $F$ is an algebra.
  \item $(\yon \dn F)\op$ is a sifted category.
  \item $F$ is a sifted colimit of represented algebras.
  \end{enumerate}
\end{lem}
\begin{proof}
  \textbf{(1) $\imp$ (2).}
  By \cref{cor:finite-coproducts-then-sifted} and duality, it suffices to show that $(\yon \dn F)$ has finite products.
  Since $F$ preserves finite products, $F1$ is the singleton set.
  Then by the Yoneda lemma, $\hom(\cT(\blank, 1), F) \iso F1 \iso 1$, so there is a unique natural transformation from the represented functor to $F$.
  Thus, $(1, * : \cT(\blank, 1) \to F)$ is the terminal object in $\yon \dn F$.
  Binary products are defined pointwise: $(a, \mu) \times (b, \nu)$ is defined as $(a \times b, \gamma)$, where $\gamma$ corresponds to $(x, y) \in F(a) \times F(b)$ and $x$ and $y$ correspond to $\mu$ and $\nu$ respectively under the Yoneda bijection.
  This is well-defined because $F(a) \times F(b) \iso F(a \times b)$.

  \textbf{(2) $\imp$ (3).}
  $F$ is naturally isomorphic to $\colim_{(\yon \dn F)\op}\yon\Pi_{F}$.
  Since $(\yon \dn F)\op$ is sifted, $F$ is a sifted colimit of represented algebras.

  \textbf{(3) $\imp$ (1).}
  By \cref{thm:algebraic-categories-has-sifted-colimits}, $\Alg(\cT)$ is closed under sifted colimits.
\end{proof}

\begin{thm}\label{thm:algebraic-categories-cocomplete}
  Every algebraic category is cocomplete.
\end{thm}
\begin{proof}
  It suffices to show that $\Alg(\cT)$ is cocomplete for any Lawvere theory $\cT$.
  By \cref{thm:algebraic-categories-has-sifted-colimits}, algebraic categories have sifted colimits.
  In particular, they have reflexive coequalizers.
  We can use the same argument to show that algebraic categories have filtered colimits.
  Thus, it suffices to construct finite coproducts.

  The initial object $i \in \CSet^{\cT}$ maps each object $t \in \cT$ to the empty set.
  This is also an initial object in $\Alg(\cT)$ as it preserves finite products.
  Now, consider two arbitrary algebras $F, G : \cT \toto \CSet$.
  We define
  \[
    F + G := \colim_{(\yon \dn F)\op}\yon\Pi_{F} + \colim_{(\yon \dn G)\op}\yon\Pi_{G} \iso \colim_{(\yon \dn F)\op \times (\yon \dn G)\op}\yon\Pi_{F} + \yon\Pi_{G}
  \]
  By \cref{lem:algebras-are-sifted-colimits}, the categories of elements of $F$ and $G$ are sifted, and the product of sifted categories is also sifted.
  Thus, the last colimit is an algebra by \cref{thm:algebraic-categories-has-sifted-colimits}.
\end{proof}

\begin{defn}
  A \emph{free cocompletion} of a category $\iC$ under colimits is a functor $F : \iC \to \iD$ so that
  \begin{enumerate}
  \item $\iD$ has colimits.
  \item For any functor $G : \iC \to \iE$, where $\iE$ has colimits, there is an essentially unique functor $G^{*} : \iD \to \iE$ preserving colimits with $G \iso G^{*}F$.
  \end{enumerate}
\end{defn}

\begin{thm}
  For every small category $\iC$, the Yoneda embedding $\yon : \iC \to \CSet^{\iC\op}$ is a free cocompletion under colimits.
\end{thm}
\begin{proof}
  Let $G : \iC \to \iE$ be any functor, where $\iE$ is cocomplete.
  We define $G^{*}$ as the pointwise left Kan extension computed by the colimit formula:
  \[
    G^{*}(F) := \colim\left((\yon \dn F) \xrightarrow{\Pi_{F}} \iC \xrightarrow{G} \iE\right)
  \]
  Since $\yon$ is fully faithful, $G^{*}$ is a genuine extension.
  % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXGNUXFxvcCJdLFsxLDEsIlxcQWxnKFxcY1QpIl0sWzIsMCwiXFxpRCJdLFswLDEsIlxceW9uIiwyXSxbMCwyLCJGIl0sWzEsMiwiRl57Kn0iLDJdXQ==
  \[\begin{tikzcd}
      \iC && \iE \\
      & {\CSet^{\iC\op}}
      \arrow["\yon"', from=1-1, to=2-2]
      \arrow["G", from=1-1, to=1-3]
      \arrow["{G^{*}}"', from=2-2, to=1-3]
    \end{tikzcd}\]
  
  It remains to show that $G^{*}$ preserves colimits.
  To this end, we show that $G^{*}$ is a left adjoint.
  We define a functor $R : \iE \to \CSet^{\iC\op}$ by
  \[
    R : e \mapsto \iE(G\blank, e)
  \]
  We need to verify the natural isomorphism
  \[
    \iE(G^{*}F, e) = \iE(\colim G\Pi_{F}, e) \iso \CSet^{\iC\op}(F, Re) = \CSet^{\iC\op}(F, \iE(G\blank, e))
  \]
  By the represented property of colimits, we have
  \[
    \iE(\colim_{(\yon \dn F)} G\Pi_{F}, e) \iso \lim_{(\yon \dn F)\op}\iE(G\Pi_{F}, e).
  \]
  and similarly,
  \[
    \CSet^{\iC\op}(F, \iE(G\blank, e)) \iso \CSet^{\iC\op}(\colim_{(\yon \dn F)}\yon\Pi_{F}, \iE(G\blank, e)) \iso \lim_{(\yon \dn F)\op}\CSet^{\iC\op}(\yon\Pi_{F}, \iE(G\blank, e))
  \]
  Note that $F$ is contravariant so it is isomorphic to $\colim_{(\yon \dn F)}\yon\Pi_{F}$.
  By the Yoneda lemma, $\iE(G\Pi_{F}, e) \iso \CSet^{\iC\op}(\yon\Pi_{F}, \iE(G\blank, e))$.
  Thus, their limits are isomorphic.
\end{proof}

\begin{thm}
  For every Lawvere theory $\cT$, the Yoneda embedding
  \[
    \yon : \cT\op \to \Alg(\cT)
  \]
  is a free cocompletion of $\cT\op$ under sifted colimits.
\end{thm}
\begin{proof}
  For any functor $G : \cT\op \to \iE$ where $\iE$ has sifted colimits, we define $G^{*}$ as the left Kan extension of $G$ along $\yon$.
  % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXGNUXFxvcCJdLFsxLDEsIlxcQWxnKFxcY1QpIl0sWzIsMCwiXFxpRCJdLFswLDEsIlxceW9uIiwyXSxbMCwyLCJGIl0sWzEsMiwiRl57Kn0iLDJdXQ==
  \[\begin{tikzcd}
      \cT\op && \iE \\
      & {\Alg(\cT)}
      \arrow["\yon"', from=1-1, to=2-2]
      \arrow["G", from=1-1, to=1-3]
      \arrow["{G^{*}}"', from=2-2, to=1-3]
    \end{tikzcd}\]
  This is always possible because $\cT\op$ has finite coproducts, and so does the slice category $\cT\op \dn t$ for any $t \in \cT$.
  By \cref{cor:finite-coproducts-then-sifted}, $\cT\op \dn t$ is sifted.
  Thus, the left Kan extension can be computed by the colimit formula.
  This is a genuine extension because $\yon$ is fully faithful and $F^{*}$ is pointwise.
  
  It remains to show that $G^{*}$ preserves sifted colimits.
  The inclusion functor $\iota : \Alg(\cT) \to \CSet^{\cT}$ preserves colimits (trivially).
  Consider the following natural isomorphism:
  \[
    \iE(G^{*}F, e) \iso \CSet^{\cT}(\iota F, Re)
  \]
  where $F$ is an algebra.
  For any sifted diagram $D : \iS \to \Alg(\cT)$, we have
  \begin{align}
    \iE(G^{*}\colim_{s \in \iS} D(s), e) &\iso \CSet^{\cT}(\iota\colim_{s \in \iS} D(s), Re)\\
                                       &\iso \CSet^{\cT}(\colim_{s \in \iS} \iota D(s), Re)\\
                                       &\iso \lim_{s \in \iS\op}\CSet^{\cT}(\iota D(s), Rd)\\
                                       &\iso \lim_{s \in \iS\op}\iE(G^{*}D(s), e)\\
                                       &\iso \iE(\colim_{s \in \iS}G^{*}D(s), e)
  \end{align}
  By the Yoneda lemma, $F^{*}(\colim G) \iso \colim F^{*}G$.
\end{proof}

\begin{cor}
  Every algebraic category $\iC$ is a free cocompletion of a small category with finite coproducts under sifted colimits.
\end{cor}

\section{Properties of algebras}
\label{sec:properties-of-algebras}

\begin{lem}
  Let $C' \in \iC$ be a retract of $C \in \iC$.
  The functor $\iC(C', \blank)$ preserves any colimit preserved by $\iC(C, \blank)$.
\end{lem}
\begin{proof}
  Let $r : C \to C'$ and $s : C' \to C$ be morphisms such that $rs = \id_{C'}$.
  The following diagram is an absolute coequalizer
  \[
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXGlDKEMsXFxibGFuaykiXSxbMiwwLCJcXGlDKEMsXFxibGFuaykiXSxbNCwwLCJcXGlDKEMnLFxcYmxhbmspIl0sWzEsMiwiXFxpQyhzLFxcYmxhbmspIl0sWzAsMSwiXFxpQyhyLFxcYmxhbmspIFxcY2lyYyBcXGlDKHMsIFxcYmxhbmspIiwwLHsib2Zmc2V0IjotMX1dLFswLDEsIlxcaWQiLDIseyJvZmZzZXQiOjF9XSxbMiwxLCJcXGlDKHIsXFxibGFuaykiLDAseyJjdXJ2ZSI6LTJ9XSxbMSwwLCJcXGlkIiwwLHsiY3VydmUiOi0yfV1d
    \begin{tikzcd}
      {\iC(C,\blank)} && {\iC(C,\blank)} && {\iC(C',\blank)}
      \arrow["{\iC(s,\blank)}", from=1-3, to=1-5]
      \arrow["{\iC(r,\blank) \circ \iC(s, \blank)}", shift left, from=1-1, to=1-3]
      \arrow["\id"', shift right, from=1-1, to=1-3]
      \arrow["{\iC(r,\blank)}", curve={height=-12pt}, from=1-5, to=1-3]
      \arrow["\id", curve={height=-12pt}, from=1-3, to=1-1]
    \end{tikzcd}
  \]
  Thus, any isomorphism $\iC(C, \colim D) \iso \colim\iC(C, D(d))$ extends to an isomorphism $\iC(C', \colim D) \iso \colim\iC(C', D(d))$.
\end{proof}

\begin{cor}
  If $C$ is regular projective (resp., finitely presentable), then its retracts are regular projective (resp., finitely presentable).
\end{cor}

\begin{thm}\label{thm:represented-functors-perfectly-presentable}
  Let $\cT$ be a small category.
  In $\CSet^{\cT}$ the representable functors are perfectly presentable.
  If $\cT$ is a Lawvere theory, the representable functors are perfectly presentable objects in $\Alg(\cT)$.
\end{thm}
\begin{proof}
  \begin{node}\label{node:represented-functors-perfectly-presentable}
    By the Yoneda Lemma,
    \[
      \CSet^{\cT}(\cT(t,\blank), \colim_{\iJ} D) \iso (\colim_{\iJ} D)(t)
    \]
    Since colimits in $\CSet^{\cT}$ are computed objectwise, we have
    \[
      (\colim_{\iJ} D)(t) = \colim_{\iJ}(D_{j}(t)) \iso \colim_{\iJ}\CSet^{\cT}(\cT(t,\blank), D_{j})
    \]
    Since $\CSet^{\cT}(\cT(t,\blank), \blank)$ preserves any colimit, it preserves sifted ones.
    Thus, $\cT(t,\blank)$ is perfectly presentable in $\CSet^{\cT}$.
  \end{node}
  \begin{node}
    If $\cT$ is a Lawvere theory, then by \cref{thm:algebraic-categories-has-sifted-colimits}, sifted colimits in $\CSet^{\cT}$ are also in $\Alg(\cT)$.
    Thus, the argument in \cref{node:represented-functors-perfectly-presentable} works for any sifted category $\iJ$.
  \end{node}
\end{proof}

\begin{lem}\label{lem:coproduct-generators-epimorphism}
  Let $\iC$ be a category with coproducts and $\iG$ be a set of objects of $\iC$.
  The following are equivalent:
  \begin{enumerate}
  \item $\iG$ is a family of generators;
  \item for every object $C \in \iC$, the canonical morphism
    \[
      e_{C} : \left(\coprod_{(G, g) \in \iG \dn C} G\right) \to C
    \]
    is an epimorphism.
  \end{enumerate}
\end{lem}
\begin{proof}
  \begin{node}
    Suppose that $\iG$ is a set of generators.
    Let $C \in \iC$ and $u, v : C \toto D$ be a parallel pair of morphisms such that $ue_{C} = ve_{C}$.
    Since $\iG$ is a set of generators, morphisms out of $\iG$ are jointly epimorphic.
    Morphisms from $\iG$ to $C$ are encoded by the canonical morphism $e_{C}$.
    The hypothesis $ue_{C} = ve_{C}$ means that $u$ and $v$ form a pair of morphisms indistinguishable by $\iG$.
    Thus, $u = v$.
  \end{node}
  \begin{node}
    Conversely, suppose that $\gamma_{C}$ is an epimorphism for each $C \in \iC$.
    The encodes precisely the jointly epimorphic condition.
    Thus, $\iG$ is a set of generators.
  \end{node}
\end{proof}

\begin{defn}
  In a category $\iA$ with coproducts, a set of objects $\iG$ is a strong generator if and only if
  \[
    e_{A} : \left(\coprod_{(G, g) \in \iG \dn A} G\right) \to A
  \]
  is an extremal epimorphism for all $A \in \iA$.
\end{defn}

\begin{cor}\label{cor:colimits-strong-generators}
  Let $\iA$ be a category with colimits.
  If every object of $\iA$ is a colimit of objects from a set $\iG$, then $\iG$ is a strong generator.
\end{cor}
\begin{proof}
  \begin{node}
    The hypothesis states that the canonical morphism
    \[
      e_{A} : \left(\coprod_{(G, g) \in \iG \dn A} G\right) \to A
    \]
    is a regular epimorphism for all $A \in \iA$.
    By \cref{lem:coproduct-generators-epimorphism}, $\iG$ is a generating set.
    Since regular epimorphisms are extremal, $\iG$ is strong.
  \end{node}
\end{proof}

\begin{lem}\label{lem:coproduct-completion-generator}
  Suppose that $\iA$ is cocomplete and $\iG$ is a set of (strong) generators of $\iA$, then the coproduct completion of $\iG$ in $\iA$ is also a set of (strong) generators.
\end{lem}
\begin{proof}
  Morphisms out of a coproduct in $\sqcup\iG$ consists of morphisms out of $\iG$.
  Thus, any indistinguishable pair of morphisms in $\iA$ remains indistinguishable.
  If $\iG$ is strong, then consider the following commutative diagram:
  \[
    % https://q.uiver.app/#q=WzAsMyxbMCwyLCJcXGNvcHJvZF97KEcsZykgXFxpbiBcXGlHIFxcZG4gXFxjb3Byb2R9RyJdLFswLDAsIlxcY29wcm9kX3soRyxnKSBcXGluIFxcc3FjdXBcXGlHIFxcZG4gQX1HIl0sWzIsMCwiQSJdLFsxLDIsImVfe0F9JyJdLFswLDIsImVfe0F9IiwyXSxbMCwxLCJlX3tcXGNvcHJvZH0iXV0=
    \begin{tikzcd}
      {\coprod_{(G,g) \in \sqcup\iG \dn A}G} && A \\
      \\
      {\coprod_{(G,g) \in \iG \dn \coprod}G}
      \arrow["{e_{A}'}", from=1-1, to=1-3]
      \arrow["{e_{A}}"', from=3-1, to=1-3]
      \arrow["{e_{\coprod}}", from=3-1, to=1-1]
    \end{tikzcd}
  \]
  Since $e_{A}$ is extremal, $e_{A}'$ is also extremal.
\end{proof}

\begin{lem}\label{lem:strong-generators-perfect-dense}
  Let $\iA$ be a cocomplete category.
  If $\iG$ is a strong generator consisting of perfectly presentable objects and closed under coproducts, then $\iG$ is dense.
  In other words, for any $a \in \iA$, the domain functor $\dom : \iG \dn a \to \iA$ has $a$ as a colimit.
\end{lem}
\begin{proof}
  \begin{node}
    Let $\alpha : \dom \to a'$ be a colimiting cocone.
    A cocone under $\dom$ with nadir $a$ can be determined by morphisms in $\iG \dn a$.
    Indeed, we may take $\beta_{f} := f$ for any $G \in \iG$ and $f : G \to a$ as a morphism $m : f \to f'$ in $\iG \dn \iA$ is simply a morphism $m : G \to G'$ in $\iA$ so that $f'm = f$ and $\dom(m) = m$.
    Thus, there is a unique morphism $\lambda : a' \to a$ such that every $f : G \to a$ factors through $\lambda$.
    % https://q.uiver.app/#q=WzAsNCxbMiwyLCJhJyJdLFswLDMsIkciXSxbNCwzLCJHJyJdLFsyLDAsImEiXSxbMSwwLCJcXGFscGhhX3tnfSJdLFsyLDAsIlxcYWxwaGFfe2cnfSIsMl0sWzEsMywiZyJdLFsyLDMsImcnIiwyXSxbMSwyXSxbMCwzLCJcXGxhbWJkYSIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
    \[\begin{tikzcd}
	&& a \\
	\\
	&& {a'} \\
	G &&&& {G'}
	\arrow["{\alpha_{f}}", from=4-1, to=3-3]
	\arrow["{\alpha_{f'}}"', from=4-5, to=3-3]
	\arrow["f", from=4-1, to=1-3]
	\arrow["{f'}"', from=4-5, to=1-3]
	\arrow[from=4-1, to=4-5]
	\arrow["\lambda"{description}, dashed, from=3-3, to=1-3]
      \end{tikzcd}\]
    To show that $\lambda$ is an isomorphism, it suffices to show that $\lambda$ is a monic extremal epimorphism.
  \end{node}
  \begin{node}
    First, we show that $\lambda$ is monomorphic for $\iG$.
    As $\iG$ has finite coproducts, so does $\iG \dn a$.
    Thus, by \cref{cor:finite-coproducts-then-sifted}, $\iG \dn a$ is sifted.
    Let $x$ be an object in $\iG$.
    Since $x$ is perfectly presentable and $a'$ is a sifted colimit, we have
    \[
      \iA(x, a') = \iA(x, \colim_{f \in \iG \dn a}\dom(f)) \iso \colim_{f \in \iG \dn a}\iA(x, \dom(f))
    \]
    Thus, every morphism $u : x \to a'$ determines morphisms $f : G \to a$ and $\util : x \to G$ so that the following commutes.
    % https://q.uiver.app/#q=WzAsMyxbMCwyLCJcXHV0aWwgXFxpbiBcXGlBKHgsXFxkb20oZikpIl0sWzIsMCwiXFxjb2xpbV97ZiBcXGluIFxcaUcgXFxkbiBhfVxcaUEoeCxcXGRvbShmKSkiXSxbNCwyLCJcXGlBKHgsXFxkb20oXFxsYW1iZGEgdSkpIl0sWzAsMV0sWzIsMCwiXFx1dGlsIFxcY2lyYyBcXGJsYW5rIl0sWzIsMV1d
    % https://q.uiver.app/#q=WzAsMyxbMCwyLCJcXHV0aWwgXFxpbiBcXGlBKHgsXFxkb20oZikpIl0sWzIsMCwiXFxjb2xpbV97ZiBcXGluIFxcaUcgXFxkbiBhfVxcaUEoeCxcXGRvbShmKSkiXSxbNCwyLCJcXGlBKHgsXFxkb20oXFxsYW1iZGEgdSkpIFxcbmkgXFxpZCJdLFswLDFdLFsyLDAsIlxcdXRpbCBcXGNpcmMgXFxibGFuayJdLFsyLDFdXQ==
    \[\begin{tikzcd}
	&& {\colim_{f \in \iG \dn a}\iA(x,\dom(f))} \\
	\\
	{\util \in \iA(x,\dom(f))} &&&& {\iA(x,\dom(\lambda u)) \ni \id}
	\arrow[from=3-1, to=1-3]
	\arrow["{\util \circ \blank}", from=3-5, to=3-1]
	\arrow[from=3-5, to=1-3]
      \end{tikzcd}\]
    Thus, $u$ equivalently corresponds to $\lambda u$ and $\id$, which in term corresponds to $\alpha_{\lambda u}$, i.e., $u = \alpha_{\lambda u}$.
    For any parallel pair $u, v : x \toto a'$, if $\lambda u = \lambda v$, then $u = \alpha_{\lambda u} = \alpha_{\lambda v} = v$.
  \end{node}
  \begin{node}
    Now, for any object $x \in \iA$ and any parallel pair $u, v : x \toto a'$ so that $\lambda u = \lambda v$, consider $e_{x} : \coprod_{f \in \iG \dn x}G \to x$.
    We have $\lambda ue_{x} = \lambda ve_{x}$.
    As $\coprod_{f \in \iG \dn x}G$ is an object in $\iG$, we have $ue_{x} = ve_{x}$, and as $e_{x}$ is epimorphic, $u = v$.
  \end{node}
  \begin{node}
    Consider the following commutative diagram:
    % https://q.uiver.app/#q=WzAsMyxbMiwwLCJcXGNvcHJvZF97ZiBcXGluIFxcaUcgXFxkbiBhfSJdLFs0LDIsImEiXSxbMCwyLCJhJyJdLFswLDEsImVfe2F9Il0sWzAsMiwiXFxhbHBoYV97ZV97YX19IiwyXSxbMiwxLCJcXGxhbWJkYSIsMl1d
    \[\begin{tikzcd}
	&& {\coprod_{f \in \iG \dn a}} \\
	\\
	{a'} &&&& a
	\arrow["{e_{a}}", from=1-3, to=3-5]
	\arrow["{\alpha_{e_{a}}}"', from=1-3, to=3-1]
	\arrow["\lambda"', from=3-1, to=3-5]
      \end{tikzcd}\]
    Since $e_{a}$ is an extremal epimorphism by hypothesis, so is $\lambda$.
  \end{node}
\end{proof}

\todo{Ivan's LN3: A variety is a cocomplete category with a dense generator consisting of ``finite projective'' objects.}
\begin{thm}[Characterization of algebraic categories]\label{thm:characterization-of-algebraic-categories}
  The following conditions are equivalent:
  \begin{enumerate}
  \item $\iA$ is algebraic.
  \item $\iA$ is cocomplete and has a set $G$ of perfectly presentable objects such that every object of $\iA$ is a sifted colimit of objects of $G$.
  \item $\iA$ is cocomplete and has a strong generator consisting of perfectly presentable objects.
  \end{enumerate}
\end{thm}
\begin{proof}
  \begin{node}
    (1) $\imp$ (2).
    By \cref{thm:algebraic-categories-cocomplete}, $\iA$ is cocomplete.
    By \cref{thm:represented-functors-perfectly-presentable} the representable functors are perfectly presentable.
    Finally, by \cref{lem:algebras-are-sifted-colimits}, every algebra in $\iA$ is a sifted colimit of representable algebras.
  \end{node}
  \begin{node}
    (2) $\imp$ (3).
    $G$ is a strong generator by \cref{cor:colimits-strong-generators}.
  \end{node}
  \begin{node}
    (3) $\imp$ (1).
    Without loss of generality, suppose that $\iG$ is closed under finite coproducts.
    This works since \cref{lem:coproduct-completion-generator} guarantees that the finite coproduct completion of $\iG$ is a strong generator.
    We claim that $\Alg(\iG\op) \eqv \iA$.
    Consider the functor $F : \iA \to \Alg(\iG\op)$ defined by
    \[
      F : A \mapsto \iA(\blank, A)
    \]
    By \cref{lem:strong-generators-perfect-dense}, $A$ is a colimit of a diagram of shape $\iG \dn A$.
    Given a morphism $\alpha : \iA(\blank, A) \to \iA(\blank, B)$, for each $g \in \iG \dn A$, consider $\alpha_{G}(g) : G \to B$.
    These morphisms assemble into a cocone under the $\dom$ diagram.
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJcXGRvbShnKSJdLFsyLDEsIkIiXSxbMCwyLCJcXGRvbShnJykiXSxbMCwxLCJcXGFscGhhX3tHfShnKSJdLFsyLDEsIlxcYWxwaGFfe0cnfShnJykiLDJdLFswLDIsIlxcZG9tKG0pIiwyXV0=
    \[\begin{tikzcd}
	{\dom(g)} \\
	&& B \\
	{\dom(g')}
	\arrow["{\alpha_{G}(g)}", from=1-1, to=2-3]
	\arrow["{\alpha_{G'}(g')}"', from=3-1, to=2-3]
	\arrow["{\dom(m)}"', from=1-1, to=3-1]
      \end{tikzcd}\]
    The morphism $m : \dom(g) \to \dom(g')$ serves as a witness for the fact that $g = g'm$.
    Thus, by the universal property of colimits, there is a unique morphism $\atil : A \to B$, proving that $F$ is fully faithful.
    It remains to show that $F$ is essentially surjective on objects.
    Consider the following diagram:
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGlHIl0sWzIsMCwiXFxpQSJdLFsxLDEsIlxcQWxnKFxcaUdcXG9wKSJdLFs0LDAsIlxcQWxnKFxcaUdcXG9wKSJdLFswLDEsIlxcaW90YSJdLFswLDIsIlxceW9uIiwyXSxbMiwxLCJcXGlvdGFeeyp9IiwxXSxbMSwzLCJGIl0sWzIsM11d
    \[\begin{tikzcd}
	\iG && \iA && {\Alg(\iG\op)} \\
	& {\Alg(\iG\op)}
	\arrow["\iota", from=1-1, to=1-3]
	\arrow["\yon"', from=1-1, to=2-2]
	\arrow["{\iota^{*}}"{description}, from=2-2, to=1-3]
	\arrow["F", from=1-3, to=1-5]
	\arrow[from=2-2, to=1-5]
      \end{tikzcd}\]
    By definition, $F\iota(G) = \iA(\blank, G)$.
    This is just the Yoneda embedding.
    Thus, the identity functor is a left Kan extension of $\yon$ along itself.
    To show that $F\iota^{*}$ is also a left Kan extension of $\yon$ along itself, it suffices to show that $F$ preserves sifted colimits as we would have
    \[
      F\iota^{*}(K) = F(\colim\iota\Pi_{K}) \iso \colim F\iota\Pi_{K}
    \]
    That is, $F\iota^{*}$ is computed by the colimit formula.
    We show that $F$ preserves sifted colimits objectwise.
    This is sufficient because colimits are computed objectwise.
    Consider any sifted diagram $D$ and any object $G \in \iG$.
    \[
      F(\colim D)(G) = \iA(G, \colim D) \iso \colim\iA(G, D\blank)
    \]
    The isomorphism follows from the fact that $G$ is perfectly presentable.
  \end{node}
\end{proof}

\begin{lem}
  Let $U : \iA \to \iB$ be a functor with a left adjoint $F : \iB \to \iA$.
  \begin{enumerate}
  \item If $I$ is faithful and conservative and $\iG$ is a strong generator of $\iB$, then $F(\iG)$ is a strong generator of $\iA$.
  \item If $I$ preserves sifted colimits and $b$ is perfectly presentable in $\iB$, then $Fb$ is perfectly presentable in $\iA$.
  \end{enumerate}
\end{lem}

\bibliographystyle{alpha}
\bibliography{lawvere}

\end{document}
