\documentclass{amsart}
\input{decls}
\title{Handbook of Categorical Algebra}
\author{Frank Tsai}
\date{\today}
% \thanks{}

\newcommand{\interp}[1]{\llbracket #1 \rrbracket}

\begin{document}
\maketitle
\tableofcontents

\section{Generators and Projectives}
\label{sec:generators-and-projectives}

\subsection{Well-Powered Categories}
\label{sec:well-powered-categories}

\begin{defn}\label{def:equiv-mono}
  Given an object $C \in \iC$ of a category $\iC$.
  Two monomorphisms $f : R \mono C$ and $g : S \mono C$ are \emph{equivalent} when there is an isomorphism $\tau : R \iso S$ such that the triangle
  \[\input{img/1-01}\]
  commutes.
  An equivalence class of monomorphisms with codomain $C$ is called a \emph{subobject} of $C$, and a category is \emph{well-powered} when every object has only a set worth of subobjects.
\end{defn}

Given a category $\iC$ and an object $C \in \iC$, we can consider the class $\mathsf{Mono}(C)$ of monomorphisms with codomain $C$.
We define a preorder on $\mathsf{Mono}(C)$ by $f \preceq g$ when there is a morphism $h : R \to S$ so that $f = g \circ h$, where $f : R \mono C$ and $g : S \mono C$.
Performing quotient on $(\mathsf{Mono}(C),\preceq)$ by the equivalence relation defined in \cref{def:equiv-mono}, one obtains the partially ordered class $\mathsf{Sub}(C)$.
Often, we write a mono $f : R \mono C$ for its equivalence class by abuse of notation.

In this notes, a ``family'' is always indexed by a set.

\subsection{Intersections and Unions}
\label{sec:intersections-and-unions}

\begin{defn}
  Given an object $C \in \iC$.
  The \emph{intersection} of a family of subobjects of $A$ is the infimum of that family in $\mathsf{Sub}(A)$.
  Similarly, the \emph{union} of a family of subobjects of $A$ is the supremum of that family in $\mathsf{Sub}(A)$.
\end{defn}

\begin{prop}\label{prop:sub-set-intersections-unions}
  If $\mathsf{Sub}(A)$ is a set, then the following are equivalent:
  \begin{enumerate}
  \item the intersection of every family of subobjects of $A$ exists;
  \item the union of every family of subobjects of $A$ exists.
  \end{enumerate}
\end{prop}
\begin{proof}
  Let $I$ be a family of subobjects.
  One has
  \begin{align}
    \inf_{I}s_{i} &= \sup\{s \mid \forall i \in I.\,s \preceq s_{i}\}\\
    \sup_{I}s_{i} &= \inf\{s \mid \forall i \in I.\,s_{i} \preceq s\}
  \end{align}
\end{proof}

\begin{prop}
  If $\iC$ has pullbacks, the intersection of two subobjects of the same object $C \in \iC$ is given by their pullback.
\end{prop}
\begin{proof}
  Given two subobjects $f$ and $g$.
  Since monomorphisms are pullback stable and closed under composition, we have another subobject $R \times_{C} S \mono C$.
  \[\input{img/1-02}\]
  The universal property of pullbacks then guarantees that this is the infimum of this family in $\mathsf{Sub}(C)$.
\end{proof}

This result generalizes to an arbitrary family of subobjects.

\begin{prop}\label{prop:complete-intersection}
  If $\iC$ is complete, then the intersection of every family of subobjects is given by their limit.
\end{prop}
\begin{proof}
  Take the limit of the family
  \[\input{img/1-03}\]
  The universal property of limits guarantees that $\bigcap F \mono C$ is the infimum of this family in $\mathsf{Sub}(C)$.
\end{proof}

\begin{cor}
  In a complete and well-powered category, the intersection and union of every family of subobjects of a fixed object always exists.
\end{cor}

\subsection{Strong Epimorphisms}
\label{sec:strong-epimorphisms}

\begin{defn}
  An epimorphism $f : A \epi B$ in a category is \emph{extremal} if it does not factor through any proper subobject of $B$; i.e., any monomorphism $i : C \mono B$ so that the following triangle commutes, is an isomorphism.
  \[\input{img/1-04}\]
\end{defn}

\begin{prop}
  In a category $\iC$,
  \begin{enumerate}
  \item every regular epimorphism is extremal,
  \item if a composite $f \circ g$ is extremal, then $f$ is extremal,
  \item an monic extremal epimorphism is an isomorphism.
  \end{enumerate}
\end{prop}
\begin{proof}
  (i) Suppose that $f = i \circ g$, we wish to show that $i$ is an isomorphism.
  Since $f \circ u = i \circ g \circ u = i \circ g \circ v = f \circ v$ and $i$ is a monomorphism, it follows that $g$ forms a cocone over $u$ and $v$.
  Thus, there is a unique morphism $j$ so that $g = j \circ f$.
  \[\input{img/1-05}\]
  Since $i \circ j \circ f = i \circ g = \id_{B} \circ f$ and $f$ is an epimorphism, $i \circ j = \id_{B}$.
  Since $i$ is a monomorphism with a right inverse, $i$ is an isomorphism.

  (ii) For any commutative triangle $f = i \circ j$, where $i$ is an monomorphism, we extend this triangle by $g$, yielding the following diagram:
  \[\input{img/1-06}\]
  Since $f \circ g$ is extremal, it follows that $i$ is an isomorphism.

  (iii) Consider the following diagram:
  \[\input{img/1-07}\]
  Since $f$ is extremal, $f$ must be an isomorphism.
\end{proof}

\begin{prop}
  In a category $\iC$, if every monic epimorphism is an isomorphism, then every epimorphism is extremal.
\end{prop}
\begin{proof}
  Let $f : A \epi B$, $i : C \mono B$, and $j : A \to C$ such that $f = i \circ j$.
  Since post-composing $i$ with $j$ results in an epimorphism, $i$ is an epimorphism.
  Then the hypothesis demands that $i$ is an isomorphism.
\end{proof}

\begin{defn}
  An epimorphism $f : A \epi B$ is called a \emph{strong epimorphism} when, $f$ has the filling property against any monomorphism, i.e., there is a morphism $w : B \to X$ commuting with the two triangles.
  \[\input{img/1-08}\]
  Note that this arrow is necessarily unique.
\end{defn}

\begin{prop}\label{prop:strong-epimorphism-facts}
  In a category $\iC$,
  \begin{enumerate}
  \item the composite of two strong epimorphisms is a strong epimorphism,
  \item if a composite $f \circ g$ is a strong epimorphism, then $f$ is a strong epimorphism,
  \item a monic strong epimorphism is an isomorphism,
  \item every regular epimorphism is strong,
  \item every strong epimorphism is extremal.
  \end{enumerate}
\end{prop}
\begin{proof}
  (i) Since $f$ is strong, there is a filling $b : B \to X$.
  This filling yields a commutative square $y \circ x \circ b = w \circ g$.
  Since $y \circ x$ is also a monomorphism and $g$ is strong, it follows that there is a filling $c : C \to X$.
  \[\input{img/1-09}\]
  (ii) Given a commutative square $x \circ u = v \circ f$, we extend this square by $g$.
  This yields the following commutative square, and since $f \circ g$ strong, there is a filling $w$ so that $w \circ f \circ g = u \circ g$ and $x \circ w = v$.
  \[\input{img/1-10}\]
  It remains to show that $w \circ f = u$.
  To this end, consider $x \circ w \circ f$.
  \begin{align}
    x \circ w \circ f &= v \circ f\\
                      &= x \circ u
  \end{align}
  Since $x$ is a monomorphism, $w \circ f = u$ follows.

  (iii) Consider the following:
  \[\input{img/1-11}\]
  The filling is clearly the inverse of $f$.
  Thus, $f$ is an isomorphism.

  (iv) Suppose that $x \circ u = v \circ f$.
  Then $x \circ u \circ a = v \circ f \circ a = v \circ f \circ b = x \circ u \circ b$.
  Since $x$ is a monomorphism, it follows that $u$ is a cocone over $a$ and $b$.
  \[\input{img/1-12}\]
  The universal property of coequalizers yields a morphism $w$ that commutes with the lower triangle.
  It remains to check that $x \circ w = v$.
  Since $f$ is an epimorphism, it suffices to check $x \circ w \circ f = v \circ f$.
  \begin{align}
    x \circ w \circ f &= x \circ u\\
                      &= v \circ f
  \end{align}

  (v) Suppose that $f = i \circ j$ with $i$ a monomorphism.
  Since $f$ is strong, there is a filling $w$ such that $i \circ w = \id$.
  Since $i$ is a monomorphism with a right inverse, it is an isomorphism.
  \[\input{img/1-13}\]
\end{proof}

\begin{prop}\label{prop:fcc-strong-epimorphism-facts}
  Let $\iC$ be a finitely complete category.
  \begin{enumerate}
  \item Every morphism with the filling property is a strong epimorphism.
  \item Every morphism with the extremal property is an extremal epimorphism.
  \item An epimorphism is extremal if and only if it is strong.
  \end{enumerate}
\end{prop}
\begin{proof}
  (i) Let $f$ be a morphism with the filling property, i.e., any commutative square against a monomorphism has a unique filling.
  We aim to prove that $f$ is an epimorphism.
  To this end, let $a,b$ be a pair of parallel morphisms so that $a \circ f = b \circ f$.
  The equalizer $E(a,b)$ is a monomorphism against which there is a commutative square depicted as follow:
  \[\input{img/1-14}\]
  Thus, there is a unique filling $w$, corresponding to a unique morphism $A \to A$ that constitute a cone over $a$ and $b$.
  In this case, $w$ corresponds to the identity.
  Thus, $a = b$.

  (ii) Let $f$ be a morphism with the extremal property, i.e., in every commutative triangle $f = i \circ j$ with $i$ a monomorphism, $i$ is an isomorphism.
  We aim to show that $f$ is a epimorphism.
  Let $a,b$ be a pair of parallel morphisms so that $a \circ f = b \circ f$.
  Consider the following equalizer:
  \[\input{img/1-15}\]
  The universal property yields a factorization of $f$.
  Thus, the equalizer $E(a,b)$ is an isomorphism (thus, an epimorphism).
  From $a \circ E(a,b) = b \circ E(a,b)$, we can conclude that $a = b$.

  (iii) The ``only if'' direction: Let $f$ be an extremal epimorphism.
  Assume the commutative square: $x \circ u = v \circ f$.
  Form the pullback of $v$ along $x$ as follows:
  \[\input{img/1-16}\]
  Since monomorphisms are pullback stable, $x'$ is a monomorphism.
  This constitute a factorization of $f$.
  Thus, $x'$ is an isomorphism.
  We can then define $w' = v' \circ {x'}\inv$.
  This is routine to check that this is a filling.

  The ``if'' direction follows immediately from \cref{prop:strong-epimorphism-facts}.
\end{proof}

\begin{prop}\label{prop:stability-pushout}
  In a category $\iC$,
  \begin{enumerate}
  \item strong epimorphisms are stable under pushout,
  \item regular epimorphisms are stable under pushout,
  \end{enumerate}
  whenever the pushouts exist in $\iC$.
\end{prop}
\begin{proof}
  Note that epimorphisms are stable under pushout.
  It remains to show that these epimorphisms are strong (resp., regular).

  (i) Let $f$ be a strong epimorphism.
  We aim to show that $f'$ is a strong epimorphism.
  To this end, let $x \circ u = v \circ f'$ be a commutative diagram.
  \[\input{img/1-17}\]
  Then there is a filling $w$.
  This constitutes a cocone over the pushout diagram.
  Thus, the universal property yields a candidate filling $w'$.
  It remains to check commutativity.
  $w' \circ f' = u$ is immediate.
  To show that $x \circ w' = v$, push the cocone $u,w$ out by $x$.
  Now, it suffices to show that $v$ factors through the legs, i.e., $v \circ h' = x \circ w$ and $v \circ f' = x \circ u$.
  The latter equation is immediate by assumption.
  To show the former, consider $v \circ h' \circ f$.
  \begin{align}
    v \circ h' \circ f &= x \circ u \circ h\\
                       &= x \circ w \circ f
  \end{align}
  Since $f$ is an epimorphism, the former equation follows.

  (ii) Now assume that $f$ is a regular epimorphism.
  The pushout of $f$ along $h$ is an epimorphism $f'$.
  Particularly, $f'$ is a cocone under the parallel pair $h \circ a$ and $h \circ b$.
  For any $x$ that forms a cocone under the same pair, the universal property of coequalizers guarantees a morphism $y$ so that $y \circ f = x \circ h$.
  Then the universal property for pushouts gives a morphism $w$.
  \[\input{img/1-18}\]
  This proves that $f'$ is a weak coequalizer.
  Since $w$ uniquely corresponds to $y$, it follows that $w$ is unique.
  Thus, $f'$ is a coequalizer.
\end{proof}

\begin{prop}
  Left adjoints preserve strong (resp., regular) epimorphisms and right adjoints preserve strong (resp., regular) monomorphisms.
\end{prop}
\begin{proof}
  Since left adjoints preserve colimits and right adjoints preserve limits, preservation of regular epimorphisms (resp., monomorphisms) is evident.
  It suffices to prove that left adjoints preserve strong epimorphisms.
  Preservation of strong monomorphisms follows at once by duality.

  Let $F \adj G$ and $f$ be a strong epimorphism in the domain of $F$.
  $Ff$ is an epimorphism and we wish to prove that it is strong.
  Let $v \circ Ff = x \circ u$ be a commutative square.
  This commutative square corresponds to the commutative square on the left.
  Note that $Gx$ is a monomorphism because right adjoints preserve monomorphisms.
  \begin{mathpar}
    \input{img/1-19} \and \input{img/1-20}
  \end{mathpar}
  Since $f$ is a strong monomorphism, it has a filling $w$.
  The transpose $w^{\dagger}$ is the sought after filling.
\end{proof}

\subsection{Epi-Mono Factorization}
\label{sec:epi-mono-factorization}

\begin{defn}
  A category $\iC$ is \emph{finitely well-complete} when
  \begin{enumerate}
  \item $\iC$ is finitely complete;
  \item for any object $C \in \iC$, the intersection of an arbitrary class of subobjects of $C$ exists.
  \end{enumerate}
\end{defn}

\begin{prop}
  \begin{enumerate}
  \item[]
  \item A complete and well-powered category is finitely well-complete.
  \item A finitely complete category where every object has just finitely many subobjects is finitely well-complete.
  \end{enumerate}
\end{prop}
\begin{proof}
  \begin{enumerate}
  \item[]
  \item \cref{prop:sub-set-intersections-unions}.
  \item \cref{prop:complete-intersection}.
  \end{enumerate}
\end{proof}

\begin{prop}
  In a finitely well-complete category, every morphism $f$ factorizes as $f = i \circ p$ where $i$ is a monomorphism and $p$ is a strong epimorphism.
\end{prop}
\begin{proof}
  Let $f : A \to B$ be a morphism.
  Let $i_{k} \in \mathsf{Sub}(B)$ be a family of subobjects of $B$ so that there is a morphism $p_{k}$ such that $f = i_{k} \circ p_{k}$.
  Any choice of $p_{k}$'s constitutes a cone over $\{i_{k}\}$ so that $f = i_{k} \circ p_{k}$.
  Consider the intersection of $\{i_{k}\}$.
  The universal property of limits gives a morphism $p$ so that $i \circ p = f$.
  \[\input{img/1-21}\]
  Additionally, $p$ is extremal since its codomain is an infimum of the family $\{i_{k}\}$.
  Thus, by \cref{prop:fcc-strong-epimorphism-facts}, $p$ is a strong epimorphism.
\end{proof}

\begin{defn}
  A category has \emph{strong-epi-mono factorizations} if every morphism $f$ factorizes as $f = i \circ p$ with $i$ a monomorphism and $p$ a strong epimorphism.
  The monomorphism $i$ is called the \emph{image} of $f$.
\end{defn}

\begin{prop}\label{prop:semf-facts}
  Let $\iC$ be a category with strong-epi-mono factorizations.
  \begin{enumerate}
  \item The strong-epi-mono factorization of an arrow is unique up to an isomorphism.
  \item Given any pair of strong-epi-mono factorizations $(i,p)$ and $(i',p')$ and morphisms $u, v$ so that $v \circ i \circ p = i' \circ p' \circ u$, there is a unique morphism $h : A \to B$ between the middle points of the strong-epi-mono factorizations making the entire diagram commute.
  \item If $h = i \circ p$ is a strong-epi-mono factorization and $h = k \circ r$, where $k$ is a monomorphism, there is a unique $t$ such that $r = t \circ p$, $i = k \circ t$.
  \end{enumerate}
\end{prop}
\begin{proof}
  \begin{enumerate}
  \item[]
  \item Let $f = i \circ p = i' \circ p'$.
    Since $p$ and $p'$ are strong epimorphisms, we have the following:
    \[\input{img/1-22}\]
    Clearly, the two dashed morphisms are mutual inverses.
  \item Consider the following diagram:
    \[\input{img/1-23}\]
  \item Consider the following diagram:
    \[\input{img/1-24}\]
  \end{enumerate}
\end{proof}

\begin{prop}
  Let $\iC$ be a category with pullbacks and strong-epi-mono factorizations.
  Given a morphism $f : A \to B$ and writing $\mathsf{Str}(A)$ and $\mathsf{Str}(B)$ for the posets of strong subobjects, the inverse image functor
  \[
    f\inv : \mathsf{Str}(B) \to \mathsf{Str}(A)
  \]
  is right adjoint to the direct strong image functor
  \[
    f_{*} : \mathsf{Str}(A) \to \mathsf{Str}(B)
  \]
  In other words, $f_{*} \adj f\inv$ is a Galois connection.
\end{prop}
\begin{proof}
  Given a strong subobject of $B$, by the dual of \cref{prop:stability-pushout}, the pullback along $f$ is a strong subobject of $A$.
  This defines $f\inv$.
  Now, given a strong subobject $A'$ of $A$, by hypothesis, $f \circ A' = i \circ p$ has a strong-epi-mono factorization.
  To show that $i$ is a strong subobject, consider any commutative diagram against an epimorphism.
  \[\input{img/1-25}\]
  Since $A'$ is strong, there is a filling $w$, whose composition with $p$ is the sought-after filling.

  Now, Let $A'$ and $B'$ be strong subobjects of $A$ and $B$, respectively.
  If $A' \subseteq f\inv(B')$, then there is a comparison morphism $A' \to f\inv(B')$.
  $f \circ a'$ admits a strong-epi-mono factorization.
  Note that this factorization commutes with the path $A' \to f\inv(B') \to B' \to B$.
  Thus, \cref{prop:semf-facts} gives a comparison morphism $f_{*}(A') \to B'$.
  \[\input{img/1-27}\]
  Conversely, if $f_{*}(A') \subseteq B'$, then there is a morphism $f_{*}(A') \to B'$ that factors through the bottom monomorphism $f_{*}(A') \to B$.
  The universal property of pullbacks gives a comparison morphism $A' \to f\inv(B')$.
  \[\input{img/1-26}\]
\end{proof}

\subsection{Generators}
\label{sec:generators}

\begin{defn}
  Let $\iC$ be a category.
  A family $(G_{i})_{i \in I}$ of objects of $\iC$ is a family of \emph{generators} when, for any pair of parallel morphisms $u, v : A \toto B$
  \[
    (\forall f : G_{i} \to A.\,u \circ f = v \circ f) \imp u = v
  \]
\end{defn}

In some categories, every object is a quotient of a coproduct of generators.
\begin{prop}
  Let $\iC$ be a category with coproducts and $(G_{i})_{i \in I}$ a family of objects of $\iC$.
  The following are equivalent:
  \begin{enumerate}
  \item $(G_{i})_{i \in I}$ is a family of generators;
  \item for every object $C \in \iC$, the unique morphism
    \[
      \gamma_{C} : \coprod_{i \in I, f \in \iC(G_{i}, C)} \dom(f) \to C
    \]
    is an epimorphism and $\gamma_{C} \circ \iota_{f} = f$.
  \end{enumerate}
\end{prop}
\begin{proof}
  Suppose that $(G_{i})_{i \in I}$ is a family of generators.
  Let $u,v : C \toto D$ be a parallel pair of morphisms such that $u \circ \gamma_{C} = v \circ \gamma_{C}$.
  We need to prove $u = v$.
  Since $(G_{i})_{i \in I}$ is a family of generators, it suffices to prove that $\forall g : G_{i} \to C.\,u \circ g = v \circ g$.
  \begin{align}
    u \circ g &= u \circ \gamma_{C} \circ \iota_{g}\\
          &= v \circ \gamma_{C} \circ \iota_{g}\\
          &= v \circ g
  \end{align}

  Conversely, suppose that $\gamma_{C}$ is an epimorphism for each $C \in \iC$.
  Let $u,v : C \toto D$ be a parallel pair of morphisms.
  Suppose that $\forall f : G_{i} \to C.\, u \circ f = v \circ f$.
  We need to show that $u = v$.
  By hypothesis, $u \circ \gamma_{C} \circ \iota_{C} = v \circ \gamma_{C} \circ \iota_{C}$.
  Thus, $u \circ \gamma_{C} = v \circ \gamma_{C}$ by the universal property of coproducts.
  Since $\gamma_{C}$ is an epimorphism, $u = v$.
\end{proof}

Observe that when a category $\iC$ has coproducts and a regular family of generators $(G_{i})_{i \in I}$, then every object $\iC$ can be presented as a coequalizer of a pair of parallel morphisms between coproducts of generators.
Since $\gamma_{P}$ is an epimorphism, $\gamma_{C}$ is the cokernel of the pair $u \circ \gamma_{P}$ and $v \circ \gamma_{P}$.
\[\input{img/1-28}\]

Here is another way to define generators.
\begin{defn}
  A family of objects $(G_{i})_{i \in I}$ is a family of generators if the functors
  \[
    \iC(G_{i}, \blank) : \iC \to \mathsf{Set}
  \]
  are collectively faithful.
\end{defn}

\section{Universal Algebra}
\label{sec:universal-algebra}

The theory of groups $\cG$ can be described by specifying
\begin{enumerate}
\item a denumerable set of variables $x, y, z, \ldots$;
\item three formal symbols $+, -, 0$.
\end{enumerate}

The terms of the theory of groups are defined inductively:
\begin{enumerate}
\item variables are terms;
\item $0$ is a term;
\item if $t$ is a term, then $-t$ is a term;
\item if $t_{1}$ and $t_{2}$ are terms, then $t_{1} + t_{2}$ is a term.
\end{enumerate}

The axioms of the theory of groups are the following:
\begin{enumerate}
\item $x + (y + z) = (x + y) + z$
\item $x + 0 = x$
\item $0 + x = x$
\item $x + (-x) = 0$
\item $(-x) + x = 0$
\end{enumerate}

\begin{defn}
  A \emph{premodel} of the theory of groups $\cG$ consists of
  \begin{enumerate}
  \item a set $G$;
  \item an element $\hat{0} \in G$;
  \item a unary function $\hat{-} : G \to G$;
  \item a binary function $\hat{+} : G \times G \to G$.
  \end{enumerate}
\end{defn}

Given a premodel $(G, \hat{0}, \hat{-}, \hat{+})$, terms are interpreted recursively in this premodel:
\begin{enumerate}
\item $\interp{x}$ is any element of $G$;
\item $\interp{0}$ is $\hat{0}$;
\item $\interp{-t}$ is $\hat{-}\interp{t}$;
\item $\interp{t_{1} + t_{2}}$ is $\interp{t_{1}} \hat{+} \interp{t_{2}}$.
\end{enumerate}

\begin{defn}
  A premodel $(G, \hat{0}, \hat{-}, \hat{+})$ constitutes a \emph{model} of $\cG$ if for every interpretation of variables, every axiom is satisfied, i.e.,
  \begin{enumerate}
  \item $\interp{x} \hat{+} (\interp{y} \hat{+} \interp{z}) = (\interp{x} \hat{+} \interp{y}) \hat{+} \interp{z}$
  \item $\interp{x} \hat{+} \hat{0} = \interp{x}$
  \item $\hat{0} \hat{+} \interp{x} = \interp{x}$
  \item $\interp{x} \hat{+} (\hat{-}\interp{x}) = \hat{0}$
  \item $(\hat{-}\interp{x}) \hat{+} \interp{x} = \hat{0}$
  \end{enumerate}
\end{defn}

We can repeat this process for rings, $R$-modules, monoids, etc.
In general, algebraic theories fit in the following formal framework:

\begin{defn}
  A \emph{presentation} $\dP$ of an algebraic theory $\cT$ is a theory with equality specified by
  \begin{enumerate}
  \item a denumerable set of variables: $x, y, z, \ldots$;
  \item for each $n \in \dN$, a set $\cO_{n}$ of $n$-ary function symbols;
  \item a set of axioms.
  \end{enumerate}
  Axioms are equalities between terms; terms are defined inductively as follows:
  \begin{enumerate}
  \item variables are terms;
  \item if $f$ is an $n$-ary function symbol and $t_{1},\ldots,t_{n}$ are terms, then $f(t_{1},\ldots,t_{n})$ is a term.
  \end{enumerate}
  A nullary function symbol is also called a \emph{constant}.
\end{defn}

\begin{defn}
  Let $\dP$ be a presentation of an algebraic theory.
  A \emph{premodel} of $\dP$ consists of
  \begin{enumerate}
  \item a set $M$;
  \item a function $\hat{f} : M^{n} \to M$ for each $n$-ary function symbol $f$.
  \end{enumerate}
\end{defn}

Given a premodel, terms are interpreted recursively:
\begin{enumerate}
\item $\interp{x}$ is any element of $M$;
\item $\interp{f(t_{1},\ldots,t_{n})} = \hat{f}(\interp{t_{1}},\ldots,\interp{t_{n}})$.
\end{enumerate}

A model is a premodel in which every axiom is valid.

\begin{defn}
  Let $\sL$ and $\sM$ be models of a presentation $\dP$.
  A $\dP$-homomorphism is a function $\varphi : L \to M$ so that
  \[
    \varphi(\hat{f}_{\sL}(a_{1},\ldots,a_{n})) = \hat{f}_{\sM}(\varphi(a_{1}),\ldots,\varphi(a_{n}))
  \]
  for any function symbol $f$ of $\dP$ and any elements $a_{1},\ldots,a_{n}$ of $L$.
\end{defn}

\begin{lem}
  Let $\dP$ be a presentation of an algebraic theory.
  The models of $\dP$ and their homomorphisms constitute a category.
\end{lem}

Given a presentation $\dP$ of some algebraic theory, we can define a congruence relation on the set of terms.
\begin{mathpar}
  \inferrule*
  { s = t }
  { s \sim t }\and

  \inferrule*
  { s \sim t }
  { s[u_{1},\ldots,u_{n}/x_{1},\ldots,x_{n}] \sim t[u_{1},\ldots,u_{n}/x_{1},\ldots,x_{n}] }\and

  \inferrule*
  { s_{1} \sim t_{1} \\ \cdots \\ s_{n} \sim t_{n} }
  { f(s_{1},\ldots,s_{n}) \sim f(t_{1},\ldots,t_{n}) }
\end{mathpar}
Essentially, two terms $s,t$ are identified if $s = t$ is an axiom.

Suppose that only variables $x_{1},\ldots,x_{n}$ appear in the axioms of $\dP$.
Let $F_{n}$ be the set of terms containing only $x_{1},\ldots,x_{n}$ modulo $\sim$.

\begin{lem}
  $F_{n}$ is a model of $\dP$.
\end{lem}
\begin{proof}
  The underlying set is just $F_{n}$.
  Each function symbol $f$ is interpreted as a function $\hat{f} : F_{n}^{m} \to F_{n}$ mapping $[t_{1}],\ldots,[t_{m}]$ to $[f(t_{1},\ldots,t_{m})]$.
  This interpretation is compatible with $\sim$ due to the last rule.

  It remains to show that all the axioms are satisfied.
  Given an axiom $s = t$, rule 1 says that these two terms are identified.
  For any possible valuation, rule 2 says that they are interpreted as the same thing.
\end{proof}

These models can be generated from a ``generic'' one.
\begin{lem}
  Let $\dP$ be a presentation of an algebraic theory.
  In the category $\mathsf{Mod}_{\dP}$, $F_{n}$ is the $n$-th copower of $F_{1}$.
\end{lem}
\begin{proof}
  For each variable $x_{i}$, let $F^{i}_{1}$ be the set of equivalent classes of terms involving just the variable $x_{i}$.
  This set is isomorphic to $F_{1}$.
  The inclusion
  \[
    \iota_{i} : F^{(i)}_{1} \to F_{n}
  \]
  is a $\dP$-homomorphism.
  These homomorphisms form a cocone.

  Now for any $\dP$-model $\sP$ together with $f_{i} : F^{(i)}_{1} \to \sP$, defining another cocone.
  Consider the function $f : F_{n} \to \sP$ mapping $[x_{i}]$ to the interpretation of $f_{i}(x_{i})$ in $\sP$.
  This function is compatible with $\sim$ because of how interpretation works.
  By construction, $f \circ \iota_{i} = f_{i}$.
\end{proof}

The following lemma is the essence of Lawvere theory.
\begin{lem}
  Let $\dP$ be a presentation of an algebraic theory.
  Let $\sF$ be the full subcategory of $\mathsf{Mod}_{\dP}$ generated by the free models $F_{n}$ on finitely many generators.
  The dual category $\sF\op$ has finite products and $\mathsf{Mod}_{\dP}$ is equivalent to the category of finite-product preserving functors from $\sF\op$ to the category of sets,
  and natural transformations between them.
\end{lem}

\section{Lawvere Theory}
\label{sec:lawvere-theory}

\begin{defn}
  An algebraic theory $\cT$ is a category with a denumerable set of objects $\{T^{0}, T^{1}, T^{2}, \ldots\}$.
  Each object $T^{n}$ is the $n$-th power of $T^{1}$.
  The object $T^{1}$ is known as the \emph{generic object} of the algebraic theory $\cT$.
  The set $\cT(T^{n},T^{1})$ contains all the definable $n$-ary operations for $\cT$.
\end{defn}

Instead of explicitly choosing specific $n$-ary operations, such as group multiplication, for an algebraic theory, Lawvere theory considers \emph{all} definable operations.
Axioms are then expressed as compositions of morphisms.

\begin{defn}
  Let $\cT$ be an algebraic theory.
  A \emph{model} of $\cT$ is a finite-product-preserving functor $F : \cT \to \mathsf{Set}$.
\end{defn}

Such a functor $F$ carries the generic object to the set $F(T^{1})$ and $T^{n}$ to the Cartesian product $F(T^{n}) \iso (F(T))^{n}$.
A morphism $g : T^{m} \to T^{n}$ is mapped to a function $F(g) : (F(T^{1}))^{m} \iso F(T^{m}) \to F(T^{n}) \iso (F(T^{1}))^{n}$.
In particular, an $n$-ary operation $f : T^{n} \to T^{1}$ is mapped to the function $F(f) : (F(T^{1}))^{n} \iso F(T^{n}) \to F(T^{1})$.

\begin{defn}
  A \emph{$\cT$-homomorphism} is a natural transformation between two $\cT$-models.
\end{defn}

Naturality and \cref{lem:T-homomorphism} then ensures that this agrees with the usual notion of homomorphism.
\input{img/02}

\begin{lem}\label{lem:T-homomorphism}
  Let $\cT$ be an algebraic theory.
  If $\alpha : F \to G$ is a morphism in $\mathsf{Mod}_{\cT}$, then the diagram
  \input{img/01}
  commutes and the isomorphisms are the canonical ones.
\end{lem}
\begin{proof}
  By naturality,
  \[
    G(\pi_{i}) \circ \alpha_{T^{n}} = \alpha_{T} \circ F(\pi_{i})
  \]
  for any projection $\pi_{i} : T^{n} \to T$.
  The projections $F(\pi_{i})$ and $G(\pi_{i})$ assemble into the isomorphisms, proving that the diagram commutes.
\end{proof}

$\cT$-models and their homomorphisms form a category $\mathsf{Mod}_{\cT}$.
There is an evident forgetful functor $U : \mathsf{Mod}_{\cT} \to \mathsf{Set}$ that evaluates a model $F$ at the generic object $T^{1}$.
In effect, this produces the underlying set of the model.

\begin{lem}
  Let $\cT$ be an algebraic theory.
  Consider the forgetful functor $U : \mathsf{Mod}_{\cT} \to \mathsf{Set}$.
  \begin{enumerate}
  \item $U$ is representable by $\cT(T^{1}, \blank)$;
  \item $U$ is faithful;
  \item $U$ reflects isomorphisms;
  \item each finite set with $n$ elements admits $\cT(T^{n}, \blank)$ as a reflection along $U$;
  \item $\cT(T^{1}, \blank)$ is a strong generator for $\mathsf{Mod}_{\cT}$.
  \end{enumerate}
\end{lem}
\begin{proof}
  Since $\cT(T^{1},\blank)$ is continuous, it is a model of $\cT$.
  By the Yoneda Lemma,
  \[
    \mathsf{Nat}(\cT(T^{1}, \blank), F) \iso F(T^{1}) \iso U(F)
  \]
  Thus, $\cT(T^{1},\blank)$ is a representing object for $U$.

  For each finite set $\{1,\ldots,n\}$, one has
  \begin{align}
    \mathsf{Nat}(\cT(T^{n},\blank), F) &\iso F(T^{n})\\
                                       &\iso (F(T^{1}))^{n}\\
                                       &\iso \mathsf{Set}(\{1,\ldots,n\}, F(T^{1}))\\
                                       &\iso \mathsf{Set}(\{1,\ldots,n\}, U(F))
  \end{align}

  Suppose that $U\alpha = \alpha_{T^{1}} : F(T^{1}) \to G(T^{1})$ is an isomorphism.
  Then by \cref{lem:T-homomorphism}, $\alpha_{T^{n}}$ is an isomorphism.
  Thus, $\alpha$ is an isomorphism.

  Now suppose that $U\alpha = \alpha_{T^{1}} = \beta_{T^{1}} = U\beta$.
  Since every component of $\alpha$ and $\beta$ are determined by $\alpha_{T^{1}}$ and $\beta_{T^{1}}$, respectively, $\alpha = \beta$.
\end{proof}

\begin{lem}
  Let $\cT$ be an algebraic theory and consider the corresponding presentation $\dT_{1}$ of this algebraic theory.
  The categories of models for $\cT$ and $\dT_{1}$ are equivalent and the functor $U : \mathsf{Mod}_{\cT} \to \mathsf{Set}$ maps a $\dT_{1}$ model to its underlying set.
\end{lem}
\begin{proof}
  Let $F : \cT \to \mathsf{Set}$ be a $\cT$-model.
  We show that $F$ yields a model of $\dT_{1}$.
  To this end, we need to choose an underlying set and a function for each function symbol.
  We make these choices as follows:
  \begin{enumerate}
  \item Underlying set: $F(T^{1})$.
  \item Functions: for each $f \in \cT(T^{n},T^{1})$, choose
    \input{img/03}
  \end{enumerate}
  By functoriality,
  \begin{enumerate}
  \item $F(\id_{T^{1}}) = \id_{F(T^{1})}$;
  \item $F(f \circ g) = F(f) \circ F(g)$.
  \end{enumerate}
  Thus, the required axioms
  \begin{enumerate}
  \item $\id_{T^{1}}(x) = x$;
  \item $f(g_{1},\ldots,g_{n}) = fg(x_{1},\ldots,x_{n})$
  \end{enumerate}
  hold.
\end{proof}

\section{Limits and Colimits in Algebraic Categories}
\label{sec:limits-and-colimits-in-algebraic-categories}

\begin{lem}
  Let $\cT$ be an algebraic theory.
  The category $\mathsf{Mod}_{\cT}$ is complete and limits are computed pointwise.
  The forgetful functor $U : \mathsf{Mod}_{\cT} \to \mathsf{Set}$ preserves and reflects limits.
\end{lem}

\begin{lem}
  Let $\cT$ be an algebraic theory.
  The category $\mathsf{Mod}_{\cT}$ has filtered colimits and these are computed pointwise.
  The forgetful functor $U : \mathsf{Mod}_{\cT} \to \mathsf{Set}$ preserves and reflects filtered colimits.
\end{lem}

\begin{lem}
  Let $\cT$ be an algebraic theory.
  In $\mathsf{\cT}$, finite limits commute with filtered colimits.
\end{lem}

\begin{lem}\label{lem:model-category-complete-cocomplete}
  Let $\cT$ be an algebraic theory.
  $\mathsf{Mod}_{\cT}$ is complete and cocomplete because it is reflective in the category $\mathsf{Set}^{\cT}$.
\end{lem}

\section{Algebraic Functors}
\label{sec:algebraic-functors}

\begin{defn}
  Let $\cR$ and $\cT$ be algebraic theories.
  A morphism of algebraic theory is a functor $F : \cR \to \cT$ with preserves finite products and maps $R^{n}$ to $T^{n}$.
\end{defn}

\begin{lem}
  The theory of sets is initial in the category of algebraic theory.
\end{lem}
\begin{proof}
  The algebraic theory of sets $\cS$ is equivalent to the dual of the category of finite sets.
  Thus, in $\cS$ the only $n$-ary operations are the projections.
  Then for any algebraic theory $\cT$, the evident finite-product preserving and identity on object functor $F : \cS \to \cT$ is unique.
\end{proof}

\begin{cor}\label{cor:forgetful-functor-is-precomposition}
  Let $\cT$ be an algebraic theory and $\cS$ be the theory of sets.
  The forgetful functor $U : \mathsf{Mod}_{\cT} \to \mathsf{Set}$ is the precomposition with the unique morphism of algebraic theories $\sigma : \cS \to \cT$.
\end{cor}
\begin{proof}
  Let $G : \cT \to \mathsf{Set}$ be a $\cT$-model.
  Then $G \circ \sigma$ is an $\cS$-model since the composite of finite-product-preserving functors is finite-product-preserving.
  The underlying set of this model is $G \circ \sigma(S^{1}) = G(T^{1}) = UG$.
\end{proof}

\begin{defn}
  Let $F : \cR \to \cT$ be a morphism of algebraic theories.
  The precomposition with $F$
  \begin{align}
    F^{*} &: \mathsf{Mod}_{\cT} \to \mathsf{Mod}_{\cR}\\
    F^{*} &: G \mapsto G \circ F
  \end{align}
  is called an \emph{algebraic functor}.
\end{defn}

\begin{thm}\label{thm:algebraic-functor-has-left-adjoint}
  Every algebraic functor has a left adjoint.
\end{thm}

\begin{cor}
  Let $\cT$ be an algebraic theory.
  The forgetful functor $U : \mathsf{Mod}_{\cT} \to \mathsf{Set}$ has a left adjoint.
\end{cor}
\begin{proof}
  By \cref{cor:forgetful-functor-is-precomposition}, $U : \mathsf{Mod}_{\cT} \to \mathsf{Set}$ is an algebraic functor.
  Then by \cref{thm:algebraic-functor-has-left-adjoint}, $U$ has a left adjoint.
\end{proof}

\section{Freely Generated Models}
\label{sec:freely-generated-models}

\section{Characterization of Algebraic Categories}
\label{sec:characterization-of-algebraic-categories}

\begin{thm}
  Let $\iC$ be a category and $U : \iC \to \mathsf{Set}$ be a functor.
  The following conditions are equivalent:
  \begin{enumerate}
  \item $\iC$ is equivalent to the category of models of some algebraic theory $\cT$, with $U$ the corresponding forgetful functor.
  \item the following conditions are satisfied:
    \begin{enumerate}
    \item $\iC$ has coequalizers and kernel pairs;
    \item $U$ has a left adjoint $F$;
    \item $U$ reflects isomorphisms;
    \item $U$ preserves regular epimorphisms;
    \item $UF$ preserves filtered colimits.
    \end{enumerate}
  \end{enumerate}
\end{thm}

\section{Tensor Products of Theories}
\label{sec:tensor-products-of-theories}

\cref{lem:model-category-complete-cocomplete} showed that the category of models of any algebraic theory is complete and cocomplete.
In fact,

\begin{lem}
  The category of algebraic theories $\mathsf{Th}$ is complete and cocomplete.
\end{lem}


\bibliographystyle{alpha}
\bibliography{all}

\end{document}
